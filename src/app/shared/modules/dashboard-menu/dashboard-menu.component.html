<aside
  class="relative isolate flex h-screen flex-col overflow-hidden  border-r  bg-[linear-gradient(180deg,rgba(242,251,247,0.98)_0%,rgba(227,246,239,0.94)_45%,rgba(210,241,231,0.9)_100%)] transition-all duration-300 ease-in-out"
  [ngClass]="collapsed ? 'w-24 px-4 py-6 shadow-[12px_0_40px_rgba(6,180,139,0.10)]' : 'w-72 px-6 py-8 shadow-[18px_0_55px_rgba(6,180,139,0.12)]'"
  [class.items-center]="collapsed">
  <div
    class="pointer-events-none absolute inset-0 rounded-[2.25rem] bg-[linear-gradient(135deg,rgba(255,255,255,0.5)_0%,rgba(255,255,255,0)_65%)] opacity-70"
    aria-hidden="true"></div>
  <span
    class="pointer-events-none absolute -right-12 -top-16 h-48 w-48 rounded-full bg-[radial-gradient(circle_at_center,rgba(6,180,139,0.35)_0%,rgba(6,180,139,0)_65%)] blur-3xl"
    aria-hidden="true"></span>
  <span
    class="pointer-events-none absolute -bottom-20 -left-12 h-48 w-48 rounded-full bg-[radial-gradient(circle_at_center,rgba(0,194,168,0.3)_0%,rgba(0,194,168,0)_70%)] blur-3xl"
    aria-hidden="true"></span>

  <header class="relative z-10 flex w-full items-center justify-between gap-4" [ngClass]="collapsed ? 'mb-4' : 'mb-7'">
    <button type="button"
      class="grid h-11 w-11 place-items-center rounded-2xl bg-[linear-gradient(135deg,var(--brand-primary)_0%,var(--brand-primary-accent)_100%)] text-white shadow-[0_14px_30px_rgba(6,180,139,0.28)] transition-transform duration-300 focus:outline-none focus:ring-2 focus:ring-brand-primary/40"
      (click)="toggleSidebar()" [attr.aria-expanded]="!collapsed"
      [attr.aria-label]="collapsed ? 'Expand navigation' : 'Collapse navigation'">
      <ng-container *ngIf="collapsed; else expandedIcon">
        <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M10 6l6 6-6 6"></path>
        </svg>
      </ng-container>
      <ng-template #expandedIcon>
        <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 6l-6 6 6 6"></path>
        </svg>
      </ng-template>
    </button>

    <div class="flex flex-col items-end text-right transition-all duration-300" *ngIf="!collapsed">
      <span class="text-[0.68rem] font-semibold uppercase tracking-[0.32em] text-brand-neutral/50">Portal</span>
      <span class="text-lg font-semibold text-brand-neutral">Prescripto</span>
    </div>
  </header>

  <!-- <section class="relative z-10 w-full" *ngIf="!collapsed">
    <div
      class="rounded-3xl border border-brand-primary/15 bg-[linear-gradient(135deg,rgba(6,180,139,0.12)_0%,rgba(0,194,168,0.08)_100%)] p-5 shadow-[0_24px_40px_rgba(6,180,139,0.12)]">
      <app-dashboard-profilecard></app-dashboard-profilecard>
    </div>
  </section> -->

  <section class="relative z-10 flex w-full flex-1 flex-col" [ngClass]="collapsed ? 'gap-4' : 'gap-6'">

    <ul class="flex flex-1 flex-col gap-2" role="list">
      @for (item of menuList; track $index) {
      <li>
        <app-menu-item [href]="item.route" [iconSvg]="item.icon" [label]="item.menuName" [active]="isActive(item.route)"
          [count]="item.count" [collapsed]="collapsed" />
      </li>
      }
    </ul>
  </section>

  <footer class="relative z-10 w-full" *ngIf="!collapsed">
    <div
      class="flex items-center justify-between gap-4 rounded-3xl border border-brand-primary/20 bg-[linear-gradient(135deg,rgba(6,180,139,0.18)_0%,rgba(0,194,168,0.14)_100%)] p-5 shadow-[0_20px_38px_rgba(6,180,139,0.16)]">
      <div>
        <p class="text-sm font-semibold text-brand-neutral">Need help?</p>
        <span class="text-xs text-brand-neutral/70">Our care crew is online 24/7</span>
      </div>
      <button type="button"
        class="rounded-xl bg-[linear-gradient(135deg,var(--brand-primary)_0%,var(--brand-primary-accent)_100%)] px-4 py-2 text-sm font-semibold text-white shadow-[0_16px_26px_rgba(6,180,139,0.25)] transition-transform duration-200 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-brand-primary/40">
        Chat
      </button>
    </div>
  </footer>
</aside>